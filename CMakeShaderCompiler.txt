file(GLOB_RECURSE VERT_SHADERS_TO_COMPILE "${CMAKE_CURRENT_SOURCE_DIR}/Shaders/*.vert")
file(GLOB_RECURSE FRAG_SHADERS_TO_COMPILE "${CMAKE_CURRENT_SOURCE_DIR}/Shaders/*.frag")
file(GLOB_RECURSE SHADERS_TO_COMPILE ${VERT_SHADERS_TO_COMPILE} ${FRAG_SHADERS_TO_COMPILE}) 

#clear the current file
file(WRITE "${CMAKE_CURRENT_SOURCE_DIR}/compile.bat" "echo COMPILING SHADERS\n")
#iterate through each thing!
foreach(SHADER_FILEPATH IN LISTS SHADERS_TO_COMPILE)

  get_filename_component(SHADER_FILENAME ${SHADER_FILEPATH} NAME)
  message(${SHADER_FILENAME})
  file(APPEND "${CMAKE_CURRENT_SOURCE_DIR}/compile.bat" "$ENV{VULKAN_SDK}\\Bin\\glslc.exe Shaders\\${SHADER_FILENAME} -o Shaders\\${SHADER_FILENAME}.spv\n")

endforeach(SHADER_FILEPATH IN LISTS SHADERS_TO_COMPILE)
file(APPEND "${CMAKE_CURRENT_SOURCE_DIR}/compile.bat" "pause")
execute_process(COMMAND ${CMAKE_CURRENT_SOURCE_DIR}/compile.bat)